<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>navigation</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        #holder {
            position: absolute;
            height: 200vh;
            width: 200vw;
            background-color: #212121;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        span {
            position: absolute;
            top: 50%;
            left: 50%;
            height: 5vmin;
            width: 5vmin;
            border-radius: 50%;
            background-color: blue;
            transform: translate(-50%, -50%);
        }
    </style>

</head>

<body>
    <div id="holder"></div>

    <script>
        var vmin, vmax, cols, rows, centerX, centerY, DistX, DistY, dots;

        var colors = ['#FF6045', '#FF8852', '#FFF486', '#92D43E', '#00BEF0', '#EA526F', '#FFF', '#018DE3'];

        function init() {
            vmin = Math.min(window.innerHeight, window.innerWidth);
            vmax = Math.max(window.innerHeight, window.innerWidth);
            dots = 4;
            cols = Math.ceil(document.getElementById('holder').clientWidth / vmin * dots) + 1;
            rows = Math.ceil(document.getElementById('holder').clientHeight / vmin * dots * 2 / Math.sqrt(3)) + 1;
            centerX = window.innerWidth / 2;
            centerY = window.innerHeight / 2;

            if (window.innerHeight > window.innerWidth) {
                DistX = document.getElementById('holder').clientWidth / (cols - 1);
                DistY = DistX / 2 * Math.sqrt(3);
            } else {
                DistY = document.getElementById('holder').clientHeight / (rows - 1);
                DistX = DistY * 2 / Math.sqrt(3);
            }

            // Remove all circles
            var spans = document.querySelectorAll('#holder span');
            spans.forEach(span => span.remove());

            for (var m = 0; m < cols * rows; m++) { // create needed circles
                var span = document.createElement('span');
                document.getElementById('holder').appendChild(span);
            }

            var index = 0; // locate circles
            for (var i = 0; i < cols; i++) { // iterate columns
                for (var j = 0; j < rows; j++) { // iterate rows
                    var span = document.querySelectorAll('#holder span')[index];
                    if (j % 2 == 0) { // find rows to offset
                        span.style.left = DistX * i + 'px';
                        span.style.top = DistY * j + 'px';
                    } else {
                        span.style.left = DistX * i + (DistX / 2) + 'px';
                        span.style.top = DistY * j + 'px';
                    }
                    span.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    span.style.position = 'absolute'; // Ensure spans are positioned
                    index++;
                }
            }
        }

        function size() {
            var spans = document.querySelectorAll('#holder span');
            spans.forEach(span => {
                var rect = span.getBoundingClientRect();
                var toCenter = Math.sqrt(Math.pow(rect.top + (rect.height / 2) - centerY, 2) + Math.pow(rect.left + (rect.width / 2) - centerX, 2));
                span.style.height = (24 - (toCenter / vmax * 45)) + 'vmin';
                span.style.width = (24 - (toCenter / vmax * 45)) + 'vmin';
            });
        }

        init();
        size();

        window.addEventListener('resize', function () {
            init();
        });

        window.addEventListener('mousemove', function (e) {
            var posX = e.clientX - centerX;
            var posY = e.clientY - centerY;
            document.getElementById('holder').style.marginTop = posY + 'px';
            document.getElementById('holder').style.marginLeft = posX + 'px';
            size();
        });

        window.addEventListener('touchmove', function (e) {
            var touch = e.touches[0];
            var posX = touch.clientX - centerX;
            var posY = touch.clientY - centerY;
            document.getElementById('holder').style.marginTop = posY + 'px';
            document.getElementById('holder').style.marginLeft = posX + 'px';
            size();

            // Prevent default scrolling
            //e.preventDefault();
        }, {passive: false});
    </script>
</body>

</html>
